version: 2
jobs:
  build:
    docker:
      - image: williamyeh/ansible:ubuntu16.04
    steps:
      - checkout
      - run:
          command: |
            apt -y install git
            git clone --depth 1 -b slxos_modules https://github.com/StackStorm/ansible
            cd ansible
            pip install -r requirements.txt
            . ./hacking/env-setup
            pip install ansible-lint
            cd ../slxos/playbooks
            ansible-lint -v *.yaml */*.yml
